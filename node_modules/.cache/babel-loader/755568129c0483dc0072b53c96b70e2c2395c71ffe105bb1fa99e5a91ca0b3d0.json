{"ast":null,"code":"const API_BASE_URL = 'http://localhost:8080/api';\nclass ApiService {\n  async login(email, password) {\n    try {\n      console.log('Attempting login to:', `${API_BASE_URL}/auth/login`);\n      const response = await fetch(`${API_BASE_URL}/auth/login`, {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json'\n        },\n        body: JSON.stringify({\n          email,\n          password\n        })\n      });\n      console.log('Response status:', response.status);\n      if (!response.ok) {\n        const errorText = await response.text();\n        console.error('Error response:', errorText);\n        let errorData;\n        try {\n          errorData = JSON.parse(errorText);\n        } catch (e) {\n          errorData = {\n            error: errorText\n          };\n        }\n        throw new Error(errorData.error || `HTTP ${response.status}: ${response.statusText}`);\n      }\n      const data = await response.json();\n      console.log('Login successful:', data);\n\n      // Store token in localStorage\n      localStorage.setItem('token', data.token);\n      localStorage.setItem('user', JSON.stringify({\n        id: data.id,\n        firstName: data.firstName,\n        lastName: data.lastName,\n        email: data.email,\n        fullName: data.fullName\n      }));\n      return data;\n    } catch (error) {\n      console.error('Login error:', error);\n      if (error.name === 'TypeError' && error.message.includes('fetch')) {\n        throw new Error('Cannot connect to server. Please make sure the backend is running on port 8080.');\n      }\n      throw new Error(error.message);\n    }\n  }\n  async register(firstName, lastName, email, password, confirmPassword) {\n    try {\n      const response = await fetch(`${API_BASE_URL}/auth/register`, {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json'\n        },\n        body: JSON.stringify({\n          firstName,\n          lastName,\n          email,\n          password,\n          confirmPassword\n        })\n      });\n      const data = await response.json();\n      if (!response.ok) {\n        throw new Error(data.error || 'Registration failed');\n      }\n\n      // Store token in localStorage\n      localStorage.setItem('token', data.token);\n      localStorage.setItem('user', JSON.stringify({\n        id: data.id,\n        firstName: data.firstName,\n        lastName: data.lastName,\n        email: data.email,\n        fullName: data.fullName\n      }));\n      return data;\n    } catch (error) {\n      throw new Error(error.message);\n    }\n  }\n  async validateToken() {\n    try {\n      const token = localStorage.getItem('token');\n      if (!token) {\n        throw new Error('No token found');\n      }\n      const response = await fetch(`${API_BASE_URL}/auth/validate`, {\n        method: 'GET',\n        headers: {\n          'Authorization': `Bearer ${token}`\n        }\n      });\n      if (!response.ok) {\n        throw new Error('Invalid token');\n      }\n      return true;\n    } catch (error) {\n      // Clear invalid token\n      localStorage.removeItem('token');\n      localStorage.removeItem('user');\n      throw new Error(error.message);\n    }\n  }\n  logout() {\n    localStorage.removeItem('token');\n    localStorage.removeItem('user');\n  }\n  getStoredUser() {\n    const user = localStorage.getItem('user');\n    return user ? JSON.parse(user) : null;\n  }\n  getToken() {\n    return localStorage.getItem('token');\n  }\n}\nexport default new ApiService();","map":{"version":3,"names":["API_BASE_URL","ApiService","login","email","password","console","log","response","fetch","method","headers","body","JSON","stringify","status","ok","errorText","text","error","errorData","parse","e","Error","statusText","data","json","localStorage","setItem","token","id","firstName","lastName","fullName","name","message","includes","register","confirmPassword","validateToken","getItem","removeItem","logout","getStoredUser","user","getToken"],"sources":["/Users/faazshaikh/Quran-Memorization-App/src/services/api.js"],"sourcesContent":["const API_BASE_URL = 'http://localhost:8080/api';\n\nclass ApiService {\n  async login(email, password) {\n    try {\n      console.log('Attempting login to:', `${API_BASE_URL}/auth/login`);\n      \n      const response = await fetch(`${API_BASE_URL}/auth/login`, {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json',\n        },\n        body: JSON.stringify({ email, password }),\n      });\n\n      console.log('Response status:', response.status);\n      \n      if (!response.ok) {\n        const errorText = await response.text();\n        console.error('Error response:', errorText);\n        let errorData;\n        try {\n          errorData = JSON.parse(errorText);\n        } catch (e) {\n          errorData = { error: errorText };\n        }\n        throw new Error(errorData.error || `HTTP ${response.status}: ${response.statusText}`);\n      }\n\n      const data = await response.json();\n      console.log('Login successful:', data);\n\n      // Store token in localStorage\n      localStorage.setItem('token', data.token);\n      localStorage.setItem('user', JSON.stringify({\n        id: data.id,\n        firstName: data.firstName,\n        lastName: data.lastName,\n        email: data.email,\n        fullName: data.fullName\n      }));\n\n      return data;\n    } catch (error) {\n      console.error('Login error:', error);\n      if (error.name === 'TypeError' && error.message.includes('fetch')) {\n        throw new Error('Cannot connect to server. Please make sure the backend is running on port 8080.');\n      }\n      throw new Error(error.message);\n    }\n  }\n\n  async register(firstName, lastName, email, password, confirmPassword) {\n    try {\n      const response = await fetch(`${API_BASE_URL}/auth/register`, {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json',\n        },\n        body: JSON.stringify({\n          firstName,\n          lastName,\n          email,\n          password,\n          confirmPassword\n        }),\n      });\n\n      const data = await response.json();\n\n      if (!response.ok) {\n        throw new Error(data.error || 'Registration failed');\n      }\n\n      // Store token in localStorage\n      localStorage.setItem('token', data.token);\n      localStorage.setItem('user', JSON.stringify({\n        id: data.id,\n        firstName: data.firstName,\n        lastName: data.lastName,\n        email: data.email,\n        fullName: data.fullName\n      }));\n\n      return data;\n    } catch (error) {\n      throw new Error(error.message);\n    }\n  }\n\n  async validateToken() {\n    try {\n      const token = localStorage.getItem('token');\n      if (!token) {\n        throw new Error('No token found');\n      }\n\n      const response = await fetch(`${API_BASE_URL}/auth/validate`, {\n        method: 'GET',\n        headers: {\n          'Authorization': `Bearer ${token}`,\n        },\n      });\n\n      if (!response.ok) {\n        throw new Error('Invalid token');\n      }\n\n      return true;\n    } catch (error) {\n      // Clear invalid token\n      localStorage.removeItem('token');\n      localStorage.removeItem('user');\n      throw new Error(error.message);\n    }\n  }\n\n  logout() {\n    localStorage.removeItem('token');\n    localStorage.removeItem('user');\n  }\n\n  getStoredUser() {\n    const user = localStorage.getItem('user');\n    return user ? JSON.parse(user) : null;\n  }\n\n  getToken() {\n    return localStorage.getItem('token');\n  }\n}\n\nexport default new ApiService();\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}